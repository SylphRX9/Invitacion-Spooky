<!DOCTYPE html> 
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Invitaci√≥n Halloween üíÄ</title>
<style>
  body {
    margin: 0;
    font-family: "Creepster", Arial, sans-serif;
    background: black;
    color: white;
    overflow: hidden;
    height: 100vh;
  }

  /* Part√≠culas naranjas flotando */
  .particle {
    position: absolute;
    border-radius: 50%;
    background: orange;
    box-shadow: 0 0 15px orange;
    opacity: 0.7;
    animation: float 10s infinite linear;
    z-index: 1;
  }
  @keyframes float {
    from { transform: translateY(100vh); opacity: 0.3; }
    to { transform: translateY(-10vh); opacity: 1; }
  }

  /* Pantalla de inicio */
  #start {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    z-index: 2;
    position: relative;
  }
  #openBtn {
    background: linear-gradient(45deg, orange, darkred);
    padding: 15px 40px;
    border: none;
    border-radius: 12px;
    font-size: 1.5rem;
    font-weight: bold;
    cursor: pointer;
    box-shadow: 0 0 25px orange;
    margin-top: 25px;
    display: block;
    z-index: 3;
    position: relative;
    transition: transform 0.2s;
  }
  #openBtn:hover { 
    transform: scale(1.05); 
  }

  /* Flash negro */
  #flash {
    position: fixed;
    top:0;left:0;
    width:100%;height:100%;
    background:black;
    opacity:0;
    pointer-events:none;
    transition: opacity 3s;
    z-index: 5;
  }

  /* Hojas */
  .page {
    display:none;
    position: fixed;
    top:50%; left:50%;
    transform: translate(-50%,-50%);
    background:white;
    color:black;
    padding: 40px;
    border-radius: 20px;
    text-align: center;
    width: 85%;
    max-width: 420px;
    box-shadow: 0 0 25px orange, 0 0 40px darkred inset;
    font-size: 1.3rem;
    z-index: 10;
  }
  .page h2 { 
    color: darkorange; 
    text-shadow: 0 0 5px red; 
    margin-top: 0;
  }

  .navBtn {
    background: linear-gradient(45deg, orange, red);
    border: none;
    padding: 14px 28px;
    margin: 12px;
    border-radius: 12px;
    cursor: pointer;
    color:white;
    font-weight: bold;
    box-shadow: 0 0 15px orange;
    display: inline-block;
    width: auto;
    position: relative;
    z-index: 11;
    transition: transform 0.2s;
  }
  .navBtn:hover {
    transform: scale(1.05);
  }

  /* Bot√≥n mute */
  #muteBtn {
    position: fixed;
    top:10px; right:10px;
    background: rgba(255,140,0,0.9);
    border:none;
    padding:12px;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 15px orange;
    z-index: 20;
    font-size: 1.2rem;
  }

  /* Mensaje de audio */
  #audioMessage {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0,0,0,0.7);
    padding: 10px 20px;
    border-radius: 20px;
    z-index: 20;
    display: none;
    color: orange;
    font-size: 0.9rem;
  }
</style>
</head>
<body>

<!-- M√∫sica de fondo y risa -->
<audio id="bgMusic" loop>
  <source src="DeFondo5.mp3" type="audio/mp3">
</audio>
<audio id="laugh">
  <source src="risa.mp3" type="audio/mp3">
</audio>

<button id="muteBtn">üîä</button>
<div id="audioMessage">Haz clic en cualquier lugar para activar el audio</div>

<!-- Part√≠culas -->
<script>
for(let i=0;i<25;i++){
  let p=document.createElement("div");
  p.className="particle";
  p.style.width=p.style.height=(Math.random()*8+4)+"px";
  p.style.left=Math.random()*100+"vw";
  p.style.animationDuration=(Math.random()*10+5)+"s";
  document.body.appendChild(p);
}
</script>

<!-- Inicio -->
<div id="start">
  <div style="font-size:5rem">‚úâÔ∏è</div>
  <button id="openBtn">ABRIR INVITACI√ìN</button>
</div>

<!-- Flash -->
<div id="flash"></div>

<!-- Hojas -->
<div id="page1" class="page">
  <h2>üéÉüëª Has sido invitado üëªüéÉ</h2>
  <p>Prep√°rate para una noche terror√≠fica...</p>
  <button class="navBtn" onclick="nextPage(2)">Siguiente</button>
</div>

<div id="page2" class="page">
  <h2>üìç Ubicaci√≥n</h2>
  <p>Casa Embrujada #123<br>Ciudad del Terror</p>
  <button class="navBtn" onclick="window.open('https://www.google.com/maps','_blank')">Ver en Maps</button>
  <div style="margin-top: 15px;">
    <button class="navBtn" onclick="prevPage(1)">Anterior</button>
    <button class="navBtn" onclick="nextPage(3)">Siguiente</button>
  </div>
</div>

<div id="page3" class="page">
  <h2>‚ú® Esperamos que vengas ‚ú®</h2>
  <p>Ser√° una noche de miedo y diversi√≥n...</p>
  <p>31 de Octubre - 8:00 PM</p>
  <button class="navBtn" onclick="prevPage(2)">Anterior</button>
</div>

<script>
let music = document.getElementById("bgMusic");
let muteBtn = document.getElementById("muteBtn");
let flash = document.getElementById("flash");
let laugh = document.getElementById("laugh");
let audioMessage = document.getElementById("audioMessage");
let audioEnabled = false;

// Solucionar problema del bot√≥n
document.getElementById("openBtn").addEventListener('click', openInvitation);

// Activar audio tras primer clic en pantalla
window.addEventListener('click', function() {
  if (!audioEnabled) {
    let audioTest = new Audio();
    audioTest.src = 'data:audio/wav;base64,UklGRnoAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoAAAC';
    audioTest.play().then(() => {
      audioEnabled = true;
      audioMessage.style.display = 'none';
      music.play().catch(e => console.log("Error m√∫sica:", e));
    }).catch(e => {
      audioMessage.style.display = 'block';
    });
  }
}, { once: true });

// Funci√≥n abrir invitaci√≥n
function openInvitation() {
  flash.style.opacity = 1;
  setTimeout(() => flash.style.opacity = 0, 4000);

  document.getElementById("start").style.display = "none";

  // üîä La risa suena de inmediato al abrir
  if (audioEnabled) {
    laugh.play().catch(e => console.log("Error risa:", e));
  }

  setTimeout(() => {
    document.getElementById("page1").style.display = "block";
  }, 3000);

  if (audioEnabled) {
    music.play().catch(e => console.log("Error m√∫sica:", e));
  }
}

// Bot√≥n mute
muteBtn.onclick = () => {
  if (music.muted) { 
    music.muted = false; 
    laugh.muted = false;
    muteBtn.textContent = "üîä"; 
  } else { 
    music.muted = true; 
    laugh.muted = true;
    muteBtn.textContent = "üîá"; 
  }
};

// Navegaci√≥n
function nextPage(n) {
  document.querySelectorAll(".page").forEach(p => p.style.display = "none");
  document.getElementById("page" + n).style.display = "block";
}
function prevPage(n) {
  document.querySelectorAll(".page").forEach(p => p.style.display = "none");
  document.getElementById("page" + n).style.display = "block";
}
</script>
</body>
</html>
